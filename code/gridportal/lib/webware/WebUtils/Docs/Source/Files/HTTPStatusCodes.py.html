<HTML><HEAD><TITLE>WebUtils/HTTPStatusCodes.py</TITLE></HEAD>
                  <BODY BGCOLOR=#EEEEEE>
                  <!--header-->
                  <!--script--><PRE><FONT COLOR=#FF0000>"""
HTTPStatusCodes.py


TO DO
    @@ document
    @@ 2000-04-17 ce: Is there an RFC for this?


DONE

    * 2000-05-08 ce: Incorporated Matt Schinkel's (matt@null.net) re.sub() for stripping HTML tags in the ASCII version of the HTTP msg.
"""</FONT>


<FONT COLOR=black><B>import</B></FONT> re, string


HTTPStatusCodeList = [
    (100, <FONT COLOR=#FF0000>'CONTINUE'</FONT>,                        <FONT COLOR=#FF0000>'The client can continue.'</FONT>),
    (101, <FONT COLOR=#FF0000>'SWITCHING_PROTOCOLS'</FONT>,             <FONT COLOR=#FF0000>'The server is switching protocols according to Upgrade header.'</FONT>),
    (200, <FONT COLOR=#FF0000>'OK'</FONT>,                              <FONT COLOR=#FF0000>'The request succeeded normally.'</FONT>),
    (201, <FONT COLOR=#FF0000>'CREATED'</FONT>,                         <FONT COLOR=#FF0000>'The request succeeded and created a new resource on the server.'</FONT>),
    (202, <FONT COLOR=#FF0000>'ACCEPTED'</FONT>,                        <FONT COLOR=#FF0000>'The request was accepted for processing, but was not completed.'</FONT>),
    (203, <FONT COLOR=#FF0000>'NON_AUTHORITATIVE_INFORMATION'</FONT>,   <FONT COLOR=#FF0000>'The meta information presented by the client did not originate from the server.'</FONT>),
    (204, <FONT COLOR=#FF0000>'NO_CONTENT'</FONT>,                      <FONT COLOR=#FF0000>'The request succeeded but that there was no new information to return.'</FONT>),
    (205, <FONT COLOR=#FF0000>'RESET_CONTENT'</FONT>,                   <FONT COLOR=#FF0000>'The agent &lt;em&gt;SHOULD&lt;/em&gt; reset the document view which caused the request to be sent.'</FONT>),
    (206, <FONT COLOR=#FF0000>'PARTIAL_CONTENT'</FONT>,                 <FONT COLOR=#FF0000>'The server has fulfilled the partial GET request for the resource.'</FONT>),
    (300, <FONT COLOR=#FF0000>'MULTIPLE_CHOICES'</FONT>,                <FONT COLOR=#FF0000>'The requested resource corresponds to any one of a set of representations, each with its own specific location.'</FONT>),
    (301, <FONT COLOR=#FF0000>'MOVED_PERMANENTLY'</FONT>,               <FONT COLOR=#FF0000>'The resource has permanently moved to a new location, and that future references should use a new URI with their requests.'</FONT>),
    (302, <FONT COLOR=#FF0000>'MOVED_TEMPORARILY'</FONT>,               <FONT COLOR=#FF0000>'The resource has temporarily moved to another location, but that future references should still use the original URI to access the resource.'</FONT>),
    (303, <FONT COLOR=#FF0000>'SEE_OTHER'</FONT>,                       <FONT COLOR=#FF0000>'The response to the request can be found under a different URI.'</FONT>),
    (304, <FONT COLOR=#FF0000>'NOT_MODIFIED'</FONT>,                    <FONT COLOR=#FF0000>'A conditional GET operation found that the resource was available and not modified.'</FONT>),
    (305, <FONT COLOR=#FF0000>'USE_PROXY'</FONT>,                       <FONT COLOR=#FF0000>'The requested resource &lt;em&gt;MUST&lt;/em&gt; be accessed through the proxy given by the &lt;code&gt;&lt;em&gt;Location&lt;/em&gt;&lt;/code&gt; field.'</FONT>),
    (400, <FONT COLOR=#FF0000>'BAD_REQUEST'</FONT>,                     <FONT COLOR=#FF0000>'The request sent by the client was syntactically incorrect.'</FONT>),
    (401, <FONT COLOR=#FF0000>'UNAUTHORIZED'</FONT>,                    <FONT COLOR=#FF0000>'The request requires HTTP authentication.'</FONT>),
    (402, <FONT COLOR=#FF0000>'PAYMENT_REQUIRED'</FONT>,                <FONT COLOR=#FF0000>'Reserved for future use.'</FONT>),
    (403, <FONT COLOR=#FF0000>'FORBIDDEN'</FONT>,                       <FONT COLOR=#FF0000>'The server understood the request but refused to fulfill it.'</FONT>),
    (404, <FONT COLOR=#FF0000>'NOT_FOUND'</FONT>,                       <FONT COLOR=#FF0000>'The requested resource is not available.'</FONT>),
    (405, <FONT COLOR=#FF0000>'METHOD_NOT_ALLOWED'</FONT>,              <FONT COLOR=#FF0000>'The method specified in the &lt;code&gt;&lt;em&gt;Request-Line&lt;/em&gt;&lt;/code&gt; is not allowed for the resource identified by the &lt;code&gt;&lt;em&gt;Request-URI&lt;/em&gt;&lt;/code&gt;.'</FONT>),
    (406, <FONT COLOR=#FF0000>'NOT_ACCEPTABLE'</FONT>,                  <FONT COLOR=#FF0000>'The resource identified by the request is only capable of generating response entities which have content characteristics not acceptable according to the accept headers sent in the request.'</FONT>),
    (407, <FONT COLOR=#FF0000>'PROXY_AUTHENTICATION_REQUIRED'</FONT>,   <FONT COLOR=#FF0000>'The client &lt;em&gt;MUST&lt;/em&gt; first authenticate itself with the proxy.'</FONT>),
    (408, <FONT COLOR=#FF0000>'REQUEST_TIMEOUT'</FONT>,                 <FONT COLOR=#FF0000>'The client did not produce a request within the time that the server was prepared to wait.'</FONT>),
    (409, <FONT COLOR=#FF0000>'CONFLICT'</FONT>,                        <FONT COLOR=#FF0000>'The request could not be completed due to a conflict with the current state of the resource.'</FONT>),
    (410, <FONT COLOR=#FF0000>'GONE'</FONT>,                            <FONT COLOR=#FF0000>'The resource is no longer available at the server and no forwarding address is known.'</FONT>),
    (411, <FONT COLOR=#FF0000>'LENGTH_REQUIRED'</FONT>,                 <FONT COLOR=#FF0000>'The request cannot be handled without a defined &lt;code&gt;&lt;em&gt;Content-Length&lt;/em&gt;&lt;/code&gt;.'</FONT>),
    (412, <FONT COLOR=#FF0000>'PRECONDITION_FAILED'</FONT>,             <FONT COLOR=#FF0000>'The precondition given in one or more of the request-header fields evaluated to false when it was tested on the server.'</FONT>),
    (413, <FONT COLOR=#FF0000>'REQUEST_ENTITY_TOO_LARGE'</FONT>,        <FONT COLOR=#FF0000>'The server is refusing to process the request because the request entity is larger than the server is willing or able to process.'</FONT>),
    (414, <FONT COLOR=#FF0000>'REQUEST_URI_TOO_LONG'</FONT>,            <FONT COLOR=#FF0000>'The server is refusing to service the request because the &lt;code&gt;&lt;em&gt;Request-URI&lt;/em&gt;&lt;/code&gt; is longer than the server is willing to interpret.'</FONT>),
    (415, <FONT COLOR=#FF0000>'UNSUPPORTED_MEDIA_TYPE'</FONT>,          <FONT COLOR=#FF0000>'The server is refusing to service the request because the entity of the request is in a format not supported by the requested resource for the requested method.'</FONT>),
    (416, <FONT COLOR=#FF0000>'REQUESTED_RANGE_NOT_SATISFIABLE'</FONT>, <FONT COLOR=#FF0000>'The server cannot serve the requested byte range.'</FONT>),
    (417, <FONT COLOR=#FF0000>'EXPECTATION_FAILED'</FONT>,              <FONT COLOR=#FF0000>'The server could not meet the expectation given in the Expect request header.'</FONT>),
    (500, <FONT COLOR=#FF0000>'INTERNAL_SERVER_ERROR'</FONT>,           <FONT COLOR=#FF0000>'An error inside the HTTP server which prevented it from fulfilling the request.'</FONT>),
    (501, <FONT COLOR=#FF0000>'NOT_IMPLEMENTED'</FONT>,                 <FONT COLOR=#FF0000>'The HTTP server does not support the functionality needed to fulfill the request.'</FONT>),
    (502, <FONT COLOR=#FF0000>'BAD_GATEWAY'</FONT>,                     <FONT COLOR=#FF0000>'The HTTP server received an invalid response from a server it consulted when acting as a proxy or gateway.'</FONT>),
    (503, <FONT COLOR=#FF0000>'SERVICE_UNAVAILABLE'</FONT>,             <FONT COLOR=#FF0000>'The HTTP server is temporarily overloaded, and unable to handle the request.'</FONT>),
    (504, <FONT COLOR=#FF0000>'GATEWAY_TIMEOUT'</FONT>,                 <FONT COLOR=#FF0000>'The server did not receive a timely response from the upstream server while acting as a gateway or proxy.'</FONT>),
    (505, <FONT COLOR=#FF0000>'HTTP_VERSION_NOT_SUPPORTED'</FONT>,      <FONT COLOR=#FF0000>'The server does not support or refuses to support the HTTP protocol version that was used in the request message.'</FONT>)
]

HTTPStatusCodeListColumnNames = (<FONT COLOR=#FF0000>'Code'</FONT>, <FONT COLOR=#FF0000>'Identifier'</FONT>, <FONT COLOR=#FF0000>'Description'</FONT>)


HTTPStatusCodes = {}
    <FONT COLOR=#1111CC>#""" HTTPStatusCodes can be indexed by either their status code number of textual identifier. The result is a dictionary with keys code, identifier, asciiMessage and htmlMessage. """</FONT>


<FONT COLOR=#1111CC># Construct HTTPStatusCodes dictionary</FONT>
<FONT COLOR=black><B>for</B></FONT> record <FONT COLOR=black><B>in</B></FONT> HTTPStatusCodeList:
    code, identifier, htmlMsg = record
    dict = {
        <FONT COLOR=#FF0000>'code'</FONT>:         code,
        <FONT COLOR=#FF0000>'identifier'</FONT>:   identifier,
        <FONT COLOR=#FF0000>'htmlMsg'</FONT>:      htmlMsg
    }
    dict[<FONT COLOR=#FF0000>'asciiMsg'</FONT>] = re.sub(<FONT COLOR=#FF0000>'&lt;.*?&gt;'</FONT>, <FONT COLOR=#FF0000>''</FONT>, htmlMsg)

    HTTPStatusCodes[code] = dict
    HTTPStatusCodes[identifier] = dict


<FONT COLOR=black><B>def</B></FONT> HTMLTableOfHTTPStatusCodes(codes=HTTPStatusCodeList, tableArgs=<FONT COLOR=#FF0000>'align=center border=2'</FONT>, rowArgs=<FONT COLOR=#FF0000>'valign=top'</FONT>, colArgs=<FONT COLOR=#FF0000>''</FONT>, headingTag=<FONT COLOR=#FF0000>'th'</FONT>, headingArgs=<FONT COLOR=#FF0000>''</FONT>):
    <FONT COLOR=#FF0000>""" Returns an HTML string containing all the status code information as provided by this module. It's highly recommended that if pass arguments to this function, that you do so by keyword. FUTURE: Allow font specs. """</FONT>
    res = [<FONT COLOR=#FF0000>'&lt;table %s&gt;\n'</FONT> % tableArgs]
    th = <FONT COLOR=#FF0000>'&lt;%s %s&gt;'</FONT> % (headingTag, headingArgs)
    res.append(<FONT COLOR=#FF0000>'&lt;tr&gt; %s Code &lt;/th&gt;  %s Identifier &lt;/th&gt;  %s Description &lt;/th&gt; &lt;/tr&gt;\n'</FONT> % (th, th, th))
    <FONT COLOR=black><B>for</B></FONT> code, identifier, htmlMsg <FONT COLOR=black><B>in</B></FONT> HTTPStatusCodeList:
        td = <FONT COLOR=#FF0000>'&lt;td %s&gt;'</FONT> % colArgs
        res.append(<FONT COLOR=#FF0000>'&lt;tr %s&gt; %s %s &lt;/td&gt;  %s %s &lt;/td&gt;  %s %s &lt;/td&gt; &lt;/tr&gt;\n'</FONT> % (rowArgs, td, code, td, identifier, td, htmlMsg))
    res.append(<FONT COLOR=#FF0000>'&lt;/table&gt;\n'</FONT>)
    <FONT COLOR=black><B>return</B></FONT> string.join(res, <FONT COLOR=#FF0000>''</FONT>)


<FONT COLOR=black><B>if</B></FONT> __name__==<FONT COLOR=#FF0000>'__main__'</FONT>:
    <FONT COLOR=black><B>print</B></FONT> <FONT COLOR=#FF0000>'''&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTTP Status Codes&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;'''</FONT>
    <FONT COLOR=black><B>print</B></FONT> HTMLTableOfHTTPStatusCodes()
    <FONT COLOR=black><B>print</B></FONT> <FONT COLOR=#FF0000>'''&lt;/body&gt;
&lt;/html&gt;'''</FONT>
</PRE>
                  <!--footer-->
                  </BODY>
